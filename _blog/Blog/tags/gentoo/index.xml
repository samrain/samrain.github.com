<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Gentoo on sam的小窝</title>
    <link>https://www.samrainhan.com/tags/gentoo/</link>
    <description>Recent content in Gentoo on sam的小窝</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <lastBuildDate>Tue, 15 Jan 2013 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://www.samrainhan.com/tags/gentoo/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Install Gentoo In Virtualbox</title>
      <link>https://www.samrainhan.com/posts/2013-01-15-install-gentoo-in-virtualbox/</link>
      <pubDate>Tue, 15 Jan 2013 00:00:00 +0000</pubDate>
      <guid>https://www.samrainhan.com/posts/2013-01-15-install-gentoo-in-virtualbox/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://docs.google.com/file/d/0B1DrsqrLRzeIT2t2cDlpMWI3anM/edit&#34;&gt;思维导图文件下载&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;1下载mini安装包&#34;&gt;1&lt;a href=&#34;http://mirrors.163.com/Gentoo/Releases/Amd64/Autobuilds/Current-install-amd64-minimal/install-amd64-minimal-20121013.iso&#34;&gt;下载mini安装包&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;h2 id=&#34;2在virtualbox上建立gentoo64bit系统&#34;&gt;2在Virtualbox上建立Gentoo64bit系统&lt;/h2&gt;&#xA;&lt;h3 id=&#34;网络&#34;&gt;网络&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;网卡1&lt;/li&gt;&#xA;&lt;li&gt;混杂模式&#xA;全部允许&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;存储&#34;&gt;存储&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;IDE控制器&lt;/li&gt;&#xA;&lt;li&gt;添加新盘&#xA;下载好的安装包&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;3启动虚拟机&#34;&gt;3启动虚拟机&lt;/h2&gt;&#xA;&lt;h3 id=&#34;按f1&#34;&gt;按F1&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;输入&lt;code&gt;gentoo&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;4设置网络&#34;&gt;4设置网络&lt;/h2&gt;&#xA;&lt;h3 id=&#34;mkdir-run&#34;&gt;&lt;code&gt;mkdir /run&lt;/code&gt;&lt;/h3&gt;&#xA;&lt;h3 id=&#34;dhcpcd-eth0&#34;&gt;&lt;code&gt;dhcpcd eth0&lt;/code&gt;&lt;/h3&gt;&#xA;&lt;h2 id=&#34;5验证网络&#34;&gt;5验证网络&lt;/h2&gt;&#xA;&lt;h3 id=&#34;ping-wwwgooglecom&#34;&gt;&lt;code&gt;ping www.google.com&lt;/code&gt;&lt;/h3&gt;&#xA;&lt;h2 id=&#34;6启动ssh&#34;&gt;6启动SSH&lt;/h2&gt;&#xA;&lt;h3 id=&#34;etcinitdsshd-start&#34;&gt;&lt;code&gt;/etc/init.d/sshd start&lt;/code&gt;&lt;/h3&gt;&#xA;&lt;h2 id=&#34;7修改root密码&#34;&gt;7修改root密码&lt;/h2&gt;&#xA;&lt;h3 id=&#34;passwd&#34;&gt;&lt;code&gt;passwd&lt;/code&gt;&lt;/h3&gt;&#xA;&lt;h2 id=&#34;8分区&#34;&gt;8分区&lt;/h2&gt;&#xA;&lt;h3 id=&#34;fdisk&#34;&gt;&lt;code&gt;fdisk&lt;/code&gt;&lt;/h3&gt;&#xA;&lt;h2 id=&#34;9安装stage3&#34;&gt;9安装Stage3&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1下载文件&#34;&gt;1下载文件&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;links http://www.gentoo.org/main/en/mirrors.xml&lt;/code&gt;&#xA;找到asia netease&#xA;进入目录【releases/amd64/autobuilds】&#xA;找到文件stage3-amd64-20121013.tar.bz2&#xA;按D键&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;2安装文件&#34;&gt;2安装文件&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;cd /mnt/gentoo&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;tar xvjpf stage3-*.tar.bz2&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;10配置编译选项&#34;&gt;10配置编译选项&lt;/h2&gt;&#xA;&lt;h3 id=&#34;打开etcmakeconf&#34;&gt;打开/etc/make.conf&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;nano -w /mnt/gentoo/etc/make.conf&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;CFLAGS=&amp;quot;-march=k8 -O2 -pipe&amp;quot;   # EM64T应该使用-march=nocona # 两个变量使用相同的设置 CXXFLAGS=&amp;quot;${CFLAGS}&amp;quot;  # j后面的数字是CPU的数目加一 MAKEOPTS=&amp;quot;-j2&amp;quot;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;11chroot&#34;&gt;11Chroot&lt;/h2&gt;&#xA;&lt;h3 id=&#34;选择境像站点&#34;&gt;选择境像站点&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用mirrorselect更新GENTOO_MIRRORS变量&#xA;&lt;code&gt;mirrorselect -i -o &amp;amp;gt;&amp;amp;gt; /mnt/gentoo/etc/make.conf&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;使用mirrorselect选择rsync镜像站点&#xA;&lt;code&gt;mirrorselect -i -r -o &amp;amp;gt;&amp;amp;gt; /mnt/gentoo/etc/make.conf&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;再检查一下/mnt/gentoo/etc/make.conf里的设置&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;拷贝dns信息&#34;&gt;拷贝DNS信息&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;cp -L /etc/resolv.conf /mnt/gentoo/etc/&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;挂载proc和dev文件系统&#34;&gt;挂载/proc和/dev文件系统&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;mount -t proc none /mnt/gentoo/proc mount -o bind /dev /mnt/gentoo/dev&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;进入新的系统环境&#34;&gt;进入新的系统环境&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;chroot到新环境里&#xA;&lt;code&gt;chroot /mnt/gentoo /bin/bash env-update source /etc/profile export PS1=&amp;amp;quot;(chroot) $PS1&amp;amp;quot;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;12配置portage&#34;&gt;12配置Portage&lt;/h2&gt;&#xA;&lt;h3 id=&#34;更新portage树&#34;&gt;更新Portage树&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;emerge --sync --quiet&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;选择正确的profile&#34;&gt;选择正确的Profile&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;验证系统profile&#xA;&lt;code&gt;eselect profile list&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;切换profile&#xA;&lt;code&gt;eselect profile set 2&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;切换到non-multilib profile&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
  </channel>
</rss>
