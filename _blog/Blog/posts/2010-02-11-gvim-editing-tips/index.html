<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <link crossorigin="anonymous" media="all"
        rel="stylesheet"
        href="https://www.samrainhan.com/css/frameworks.css" />
    <link crossorigin="anonymous" media="all"
        rel="stylesheet" href="https://www.samrainhan.com/css/github.css" />
    <meta name="viewport" content="width=device-width">

    <title>GVim编辑窍门 - sam的小窝</title>

    <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://www.samrainhan.com/images/favicon.ico">
    <meta name="theme-color" content="#1e2327">
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-37708730-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>

<body class="env-production emoji-size-boost page-responsive page-profile">
  <div class="position-relative js-header-wrapper ">
    <span class="Progress progress-pjax-loader position-fixed width-full js-pjax-loader-bar">
        <span class="progress-pjax-loader-bar top-0 left-0" style="width: 0%;"></span>
    </span>
    <header class="Header js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner">
        <div class="Header-item d-none d-lg-flex">
            <a class="Header-link" href="https://www.samrainhan.com/" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div
            class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden">
            <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to"
                role="combobox" aria-owns="jump-to-results" aria-label="Search or jump to" aria-haspopup="listbox"
                aria-expanded="false">
                <div class="position-relative">
                </div>
            </div>
        </div>
        <div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative" style="margin-right: auto;">
            <a class="Header-link" href="https://www.samrainhan.com/" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div class="Header-item position-relative mr-0 d-none d-lg-flex">
            <details class="details-overlay details-reset">
                <summary class="Header-link" aria-label="View profile and more"
                    data-ga-click="Header, show menu, icon:avatar">
                    
                    <img alt="" class="avatar" src="https://www.samrainhan.com/images/avatar.png" height="20" width="20">
                    
                </summary>
            </details>
        </div>
    </header>
</div>

<div id="start-of-content" class="show-on-focus"></div>
<div id="js-flash-container">
</div>

  
<div class="application-main " data-commit-hovercards-enabled="">
    <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
        <main id="js-repo-pjax-container" data-pjax-container="">
            <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-0 pt-lg-4 ">
                <div class="repohead-details-container clearfix container-lg p-responsive d-none d-lg-block">
                    <div class="mb-3 d-flex">
                        <h1 class="public css-truncate float-none flex-auto width-fit pl-0">
                            <a class="avatar mr-1" href="https://www.samrainhan.com/about/">
                            
                                <img
                                    src="https://www.samrainhan.com/images/avatar.png" width="26" height="26">
                            
                            </a>
                            <span class="author"><a
                                    href="https://www.samrainhan.com/">韩雨</a></span>
                            <span class="path-divider">/</span>
                            <strong itemprop="name" class="css-truncate-target" style="max-width: 410px"><a
                                    href="https://www.samrainhan.com/posts/2010-02-11-gvim-editing-tips/">GVim编辑窍门</a></strong>

                            <div class="d-block text-small text-gray">
                                Created <time-ago datetime="2010-02-11" class="no-wrap"
                                    title="Created at 2010/02/11">
                                    2010-02-11</time-ago>
                                <span class="file-info-divider"></span>
                                Modifyed <time-ago datetime="2010-02-11" class="no-wrap"
                                    title="Modifyed  at 2010/02/11">
                                    2010-02-11</time-ago>
                            </div>
                        </h1>
                    </div>
                </div>




            </div>
            <div class="container-lg clearfix new-discussion-timeline experiment-repo-nav  p-responsive">
                <div class="repository-content ">
                    <div class="Box mt-3 position-relative">
                        <div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">
                            <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                                2474 Words
                                
                            </div>
                        </div>

                        <div id="readme" class="Box-body readme blob instapaper_body js-code-block-container">
                            <article class="markdown-body entry-content p-3 p-md-6" itemprop="text"><h1 id="准备工作">准备工作</h1>
<p>首先， 我们打开 VIM， 输入一段文本， 用于今天的演示：this is a test</p>
<h1 id="查找替换">查找替换</h1>
<p>按几下 ESC 进入 Normal 模式， 输入以下命令： <code>:%s/ /\r/g</code> 回车后得到的效果如下：</p>
<pre><code>this
is
a
test
</code></pre>
<p>解说： 这条命令的作用是将文章中所有的空格替换为回车。 几乎所有的编辑器都支持查找替换， 但并不是所有的编辑器都支持把空格替换为回车， 因此这个功能在许多别的编辑器里做起来是比较繁琐的。</p>
<h1 id="行的拼接">行的拼接</h1>
<p>刚才我们把一行文字打碎为 4 行了， 那如何再把它们拼接起来呢？ 当然， 我们可以通过前面说的查找替换的方式， 将回车再替换为空格， 实现行的拼接。 但是， 这里我们用的是另一种方式。
按几下 ESC 进入 Normal 模式， 然后输入这段命令： <code>ggVG</code>. <code>gg</code> 表示跳到文本开头， <code>V</code> 表示进入行选择模式， <code>G</code> 表示选择到文章末尾。 通过这 3 条命令， 总共 4 个按键， 我们选中了整篇文章。
然后， 按下冒号 <code>:</code> 进入命令模式， 状态栏上出现： <code>:'&lt;,'&gt;</code>字样， 在它后面输入 <code>j</code>， 然后回车， 可以看到， 整篇文章又被拼接起来了， 整个操作包括回车只按了 7 次键：</p>
<pre><code>this is a test
</code></pre>
<h1 id="复制粘贴与重复动作">复制粘贴与重复动作</h1>
<p>按几下 ESC 确认当前处在 Normal 模式下， 然后按<code>yy</code>， 即可将当前行复制到默认寄存器中 (相当于剪贴板)。 然后按下<code>12p</code>， VIM 将执行粘贴动作 12 次， 屏幕上出现了 13 行这样的字符：</p>
<pre><code>this is a test
this is a test
this is a test
this is a test
this is a test
this is a test
this is a test
this is a test
this is a test
this is a test
this is a test
this is a test
this is a test
</code></pre>
<p>解说： 在 VIM 中， 复制和粘贴操作相当快捷。 另外， VIM 中大部分命令都可以通过在命令前加数字重复若干遍。</p>
<h1 id="列操作">列操作</h1>
<p>接下来我们把每一行的开头第一个字母改为大写。</p>
<p>按几下 ESC 确认当前处在 Normal 模式下， 然后按<code>gg</code>跳到第一行， 按下<code>Ctrl+v</code>进入列选择模式 (如果你按下<code>Ctrl+v</code>没能进入列选择模式， 请看这里)， 然后按<code>G</code>， 跳到文章最后一行，此时你应该看到，文本的第一列被选中了， 而且只选中了第一列。 按下<code>U</code>键， 可以看到， 每行的第一个字母都变为大写了。 提示： 选中文本后按<code>u</code>可以将文本变为小写， 选中文本后按<code>~</code>可以翻转原有的大小写。</p>
<pre><code>This is a test
This is a test
This is a test
This is a test
This is a test
This is a test
This is a test
This is a test
This is a test
This is a test
This is a test
This is a test
This is a test
</code></pre>
<p>然后， 我们在每行的前面加上一个星号。 按下<code>gg</code>跳到第一行， 按<code>Ctrl+v</code>进入列选择模式， 再按<code>G</code>， 选中全文的第一列， 然后按<code>I</code>， 进入列插入状态， 输入星号<code>*</code>， 再按下<code>ESC</code>， 你会看到， 所有行之前都出现了一个星号：</p>
<pre><code>*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
*This is a test
</code></pre>
<p>解说： 对于编写程序的人来说， 把一段代码批量注释掉是一个很常见的操作， 使用列插入可以很容易地做到这一点。 另外， 列选择后按<code>x</code>删除被选中的块， 可以批量地解除注释。</p>
<h1 id="宏的录制">宏的录制</h1>
<p>接下来， 我们要将文本的偶数行修改为： This is another test。 由于所有的偶数行都要进行同样的操作， 因此我们把这个操作录制下来， 然后重复播放若干遍， 就能很快地完成这项工作了。
首先， 按几下<code>ESC</code>确认处在 Normal 模式下， 再按下<code>gg</code>跳到第一行， 准备开始操作。 我们首先按下<code>q</code>键， 然后再按一个其它字母， 将这个宏录制到该字母对应的寄存器下。 例如我们这里使用m寄存器， 则按<code>qm</code>。 此时 VIM 状态栏出现<code>recording</code>字样， 表明已经进入了录制状态。
然后， 我们把第二行的<code>a</code>修改为<code>another</code>。 首先按<code>j</code>进入第二行， 然后按<code>$</code>跳到行末， 再按两下<code>b</code>往前跳两个单词， 此时光标停在字母<code>a</code>上。 然后我们按下<code>caw</code>键删除<code>a</code>并进入插入状态， 然后输入<code>another</code>， 按<code>ESC</code>回到 Normal 状态， 按<code>j</code>进入下一行， 整个操作步骤就完成了。 最后， 我们再按一下<code>q</code>， 结束该宏的录制。
接下来我们播放这个宏， 完成整个操作步骤。 在键盘上输入<code>1000@m</code>， 表示将m寄存器里的宏播放 1000 次， 马上可以看到， 文章中所有偶数行的a都变成了 another。</p>
<pre><code>*This is a test
*This is another test
*This is a test
*This is another test
*This is a test
*This is another test
*This is a test
*This is another test
*This is a test
*This is another test
*This is a test
*This is another test
*This is a test
</code></pre>
<p>解说： 虽然我们指定播放 1000 次， 但事实上， 执行到第 6 次的时候， 光标挪到了屏幕最下方， 于是执行过程就自动停止了。 因此， 在批量操作的时候， 我们可以指定足够大的数字， 而不用担心出现问题。
另外， 修改 a 的时候， 我们跳到行末后再使用 b 命令以单词为单位跳转， 而没使用 h 一个字母一个字母往回挪， 我们使用 caw 修改整个单词， 而不使用 s 命令删除单个字母并进入 Insert 模式。 这些细节可以保证录制得到的宏更具有一般性。</p>
<h1 id="点命令">点命令</h1>
<p>接下来， 我们在每行的末尾加上一个感叹号 !。
由于每行长度不同， 我们无法使用块选择方式批量尾部添加感叹号。 使用宏录制的方式是可以做到这点的， 但操作稍嫌繁琐了一些。 使用点命令， 可以非常方便地做到这一点。
先按几下<code>ESC</code>确认当前出于 Normal 模式， 然后使用<code>gg</code>跳到第一行， 按<code>A</code>进行行尾插入， 输入<code>!</code>， 然后按下<code>ESC</code>回到 Normal 状态， 第一行的感叹号就添加完毕了。
然后， 我们按<code>j</code>进入第二行， 再按<code>.，</code>可以看到， 第二行尾部也出现了感叹号。 反复按<code>j.j.j.</code>， 直到每一行尾部都添加了感叹行为止。</p>
<pre><code>*This is a test!
*This is another test!
*This is a test!
*This is another test!
*This is a test!
*This is another test!
*This is a test!
*This is another test!
*This is a test!
*This is another test!
*This is a test!
*This is another test!
*This is a test!
</code></pre>
<p>解说： 点命令的作用是， 重复最近一次所做的编辑操作。 由于在第一行里做的操作是行尾添加， 因此在第二行重复这个动作的时候， 也会在行尾添加同样的字符。 点命令功能不如宏强大， 但它使用起来比宏简便， 因此也有着广泛的用途。</p>
<h1 id="跳转练习">跳转练习</h1>
<p>在vim下可以使用常用的箭头键,但是 还有其它键可以让你更快的达到目标</p>
<pre><code>hjkl 这是代替箭头键功能的
H M L 跳到屏幕的顶上 中间 下方

w 跳到下一个单词的开始
e 跳到单词的结束
b 向后跳

gg 跳到文件的开始
G 跳到文件的结束
10gg 或10G 跳到第10行


ta 跳到下一个a 前面
fa 跳到下一个a
大写的意思相反
</code></pre>
<p>另外还有%(跳到文件的%多少) 和|(跳到第几列) 不过我很少用
上面的都可以加上数字前缀 表示第几个匹配</p>
<p>另外看文件时 除了pageup pagedown外还有其它的快速键
如<code>CTRL-F</code>向前一页 <code>CTRL-B</code> 向后一页</p>
<p>上面不是重要的
<code>CTRL-D</code> 向下半页 <code>CTRL-U</code> 向上半页我觉得更实用 这样看文章时就不会跳转出错
另外还有
<code>CTRL-E</code> 向下一行
<code>CTRL-Y</code> 向上一行</p>
<pre><code>^ 行首
$ 行尾
0 第一个字符
</code></pre>
<p>另外上面也作为vim其它命令的定位符 如删除<code>d</code>.</p>
<p><code>dt)</code>一直删除到这行的)</p>
</article>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>



  <div class="footer container-lg width-full p-responsive" role="contentinfo">
    <div
        class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
            <li class="mr-3 mr-lg-0">© 2019. Theme by <a href="https://github.com/MeiK2333/github-style"><span>github-style</span></a></li>
        </ul>

        <a aria-label="Homepage" title="sam的小窝" class="footer-octicon d-none d-lg-block mx-lg-4"
            href="https://www.samrainhan.com/">
            <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
        </a>
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        </ul>
    </div>
    <div class="d-flex flex-justify-center pb-6">
        <span class="f6 text-gray-light"></span>
    </div>
</div>

<script crossorigin="anonymous"
    type="application/javascript" src="https://www.samrainhan.com/js/frameworks.js"></script>

<script crossorigin="anonymous" async="async"
    type="application/javascript" src="https://www.samrainhan.com/js/github-bootstrap.js"></script>
<script>
    let classs = ['pinned-item-desc', 'text-gray', 'text-small', 'd-block', 'mt-2', 'mb-3'];
    const pinned_posts = document.getElementsByName('pinned-post');
    for (let i = 0; i < pinned_posts.length; i++) {
        for (let j = 0; j < classs.length; j++) {
            const ps = pinned_posts[i].getElementsByTagName('p');
            for (let k = 0; k < ps.length; k++) {
                ps[k].classList.add(classs[j]);
            }
        }
    }
    classs = [ 'd-inline-block', 'text-gray', 'mb-2', 'pr-4'];
    const posts_posts = document.getElementsByName('posts-post');
    for (let i = 0; i < posts_posts.length; i++) {
        for (let j = 0; j < classs.length; j++) {
            const ps = posts_posts[i].getElementsByTagName('p');
            for (let k = 0; k < ps.length; k++) {
                ps[k].classList.add(classs[j]);
            }
        }
    }
</script>
</body>

</html>